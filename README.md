##### Тестовое задание от CSI

Используя язык Java необходимо написать метод объединения имеющихся цен с
вновь импортированными из внешней системы. Также необходимо написать unit тесты, для
проверки хотя бы некоторых возможных вариантов.

Требования к оформлению:
1) Сборка проекта и запуск тестов при помощи maven или gradle.
2) Получившийся код должен быть размещён в системе контроля версий.
Предпочтительно использование Git на публичных сервисах (GitLab, GitHub, Bitbucket).

Каждый продаваемый товар, имеет свою цену. Цен у товара может быть несколько,
каждая цена имеет свой номер, принадлежность к отделу, период действия и значение в
валюте.
В базе данных для каждого товара хранится история цен. В один момент времени
может действовать только одна цена из цен, с одинаковым номером и отделом. Обычно
товар продается по первой цене, вторая, третья и четвертая могут используются для
применения скидок (т.е. сработало условие скидки, товар будет продан по цене номер 2).
Касса может обслуживать какой-то отдел, тогда она будет использовать при продаже цены
указанные для этого отдела.
Правила объединения цен:
если товар еще не имеет цен, или имеющиеся цены не пересекаются в периодах действия
с новыми, то новые цены просто добавляются к товару;
если имеющаяся цена пересекается в периоде действия с новой ценой, то:

если значения цен одинаковы, период действия имеющейся цены увеличивается
согласно периоду новой цены;

если значения цен отличаются, добавляется новая цена, а период действия старой
цены уменьшается согласно периоду новой цены.
Метод в качестве параметров получает коллекцию имеющихся цен, новых цен и
должен вернуть коллекцию объединенных цен, для дальнейшего сохранения в БД.

Java8, SpringBoot 2.2.4, Tomcat, Maven, H2 DB

Основной метод обработки - https://github.com/neustupov/price-merge-app/blob/b117bf599fdecf43d9ffb7bdee597f75f2391ddb/src/main/java/ru/neustupov/pricemergeapp/service/PriceService.java#L56

Все контрольные примеры корректно отрабатывают в тестах приложения.

Кроме этого, проверить корректность обработки данных можно отправив Get запрос на http://localhost:8090/api/v1/prices/merge
с body:

##### Request

```json
[
           {
               "productCode": "122856",
               "number": 1,
               "depart": 1,
               "begin": "20.01.2013 00:00:00",
               "end": "20.02.2013 23:59:59",
               "value": 11000
           },
           {
               "productCode": "122856",
               "number": 2,
               "depart": 1,
               "begin": "15.01.2013 00:00:00",
               "end": "25.01.2013 23:59:59",
               "value": 92000
           },
           {
               "productCode": "6654",
               "number": 1,
               "depart": 2,
               "begin": "12.01.2013 00:00:00",
               "end": "13.01.2013 00:00:00",
               "value": 4000
           },
           {
               "productCode": "100",
               "number": 1,
               "depart": 1,
               "begin": "10.01.2020 00:00:00",
               "end": "20.01.2020 23:59:59",
               "value": 11000
           },
           {
               "productCode": "200",
               "number": 1,
               "depart": 1,
               "begin": "10.01.2020 00:00:00",
               "end": "20.01.2020 23:59:59",
               "value": 11000
           },
           {
               "productCode": "300",
               "number": 1,
               "depart": 1,
               "begin": "05.01.2020 00:00:00",
               "end": "15.01.2020 23:59:59",
               "value": 1000
           },
           {
               "productCode": "300",
               "number": 1,
               "depart": 1,
               "begin": "15.01.2020 00:00:00",
               "end": "25.01.2020 23:59:59",
               "value": 13000
           }
       ]
```
##### Response : 

```json
[
    {
        "id": 1,
        "productCode": "122856",
        "number": 1,
        "depart": 1,
        "begin": "01.01.2013 00:00:00",
        "end": "20.02.2013 23:59:59",
        "value": 11000
    },
    {
        "id": 2,
        "productCode": "122856",
        "number": 2,
        "depart": 1,
        "begin": "10.01.2013 00:00:00",
        "end": "15.01.2013 00:00:00",
        "value": 99000
    },
    {
        "id": null,
        "productCode": "122856",
        "number": 2,
        "depart": 1,
        "begin": "15.01.2013 00:00:00",
        "end": "25.01.2013 23:59:59",
        "value": 92000
    },
    {
        "id": null,
        "productCode": "6654",
        "number": 1,
        "depart": 2,
        "begin": "01.01.2013 00:00:00",
        "end": "12.01.2013 00:00:00",
        "value": 5000
    },
    {
        "id": null,
        "productCode": "6654",
        "number": 1,
        "depart": 2,
        "begin": "13.01.2013 00:00:00",
        "end": "31.01.2013 00:00:00",
        "value": 5000
    },
    {
        "id": null,
        "productCode": "6654",
        "number": 1,
        "depart": 2,
        "begin": "12.01.2013 00:00:00",
        "end": "13.01.2013 00:00:00",
        "value": 4000
    },
    {
        "id": null,
        "productCode": "100",
        "number": 1,
        "depart": 1,
        "begin": "01.01.2020 00:00:00",
        "end": "10.01.2020 00:00:00",
        "value": 1000
    },
    {
        "id": null,
        "productCode": "100",
        "number": 1,
        "depart": 1,
        "begin": "20.01.2020 23:59:59",
        "end": "31.01.2020 00:00:00",
        "value": 1000
    },
    {
        "id": null,
        "productCode": "100",
        "number": 1,
        "depart": 1,
        "begin": "10.01.2020 00:00:00",
        "end": "20.01.2020 23:59:59",
        "value": 11000
    },
    {
        "id": 5,
        "productCode": "200",
        "number": 1,
        "depart": 1,
        "begin": "01.01.2020 00:00:00",
        "end": "10.01.2020 00:00:00",
        "value": 1000
    },
    {
        "id": null,
        "productCode": "200",
        "number": 1,
        "depart": 1,
        "begin": "10.01.2020 00:00:00",
        "end": "20.01.2020 23:59:59",
        "value": 11000
    },
    {
        "id": 6,
        "productCode": "200",
        "number": 1,
        "depart": 1,
        "begin": "20.01.2020 23:59:59",
        "end": "31.01.2020 00:00:00",
        "value": 2000
    },
    {
        "id": 7,
        "productCode": "300",
        "number": 1,
        "depart": 1,
        "begin": "01.01.2020 00:00:00",
        "end": "15.01.2020 23:59:59",
        "value": 1000
    },
    {
        "id": null,
        "productCode": "300",
        "number": 1,
        "depart": 1,
        "begin": "15.01.2020 00:00:00",
        "end": "25.01.2020 23:59:59",
        "value": 13000
    },
    {
        "id": 9,
        "productCode": "300",
        "number": 1,
        "depart": 1,
        "begin": "25.01.2020 23:59:59",
        "end": "31.01.2020 00:00:00",
        "value": 3000
    }
]
```
